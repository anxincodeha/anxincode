> 本文收录于公众号「安心代码」和github开源项目「anxincode」：[https://github.com/anxincodeha/anxincode](https://github.com/anxincodeha/anxincode)，公众号内回复「笔记」或者查看github项目README.md即可获取所有的编程学习笔记和资料📝，欢迎大家关注👀和star⭐️
>
> ![](.\..\欢迎关注公众号“安心代码”.png)
>

安心代码，我是安心❤️💻😊朋友们好呀👋✨~~~这篇文章跟大家介绍下 VMWARE 中的创建虚拟机后的一个必备操作：为虚拟机生成快照📝⚙️🛠️✅

# 一、快照是什么以及创建快照的必要性
我们经常需要在 VMware 中创建虚拟机并且对虚拟机安装软件、进行配置。经常存在如下情况：安装软件错误或者配置错误，想清除错误的软件或配置，又不知道该怎么清除或者清除非常麻烦😵‍💫这种情况下，VMware 如果我们在安装软件/更改配置前对虚拟机进行快照，保存虚拟机安装软件/更改配置前的状态的话，这个问题就很简单了，可以直接把虚拟机恢复到快照。

虚拟机快照是VMware提供的一项非常好用的功能👍👍👍它能够捕捉虚拟机某一时刻的完整状态，包括虚拟机的磁盘、内存、配置和设备状态等。简而言之，快照记录了虚拟机在某一特定时间点上的`备份`💾你可以在未来某个时刻恢复虚拟机到该状态。如果没有创建快照，在进行虚拟机的系统升级、软件安装或配置更改时，任何潜在的问题都可能导致无法恢复的故障，这种情况下只能重新安装虚拟机，然后再对虚拟机进行配置😱😱😱但是有了快照功能，可以直接把虚拟机恢复到创建快照的那个时间点🕧这样就相当于撤销那些危险、未知操作以及它们对于虚拟机带来的影响。怎么样，这个功能是不是很方便呢😄😄😄？

# 二、VMware 如何怎么保存虚拟机的快照
## 1.保证想要创建快照的虚拟机在挂起状态或者关机状态
如果直接在运行状态下创建了虚拟机快照可能会丢失数据，所以我们首先要挂起或者关机要创建快照的虚拟机：

![](https://cdn.nlark.com/yuque/0/2025/png/50835397/1736054009320-058897ff-2011-4ccc-a85e-d839a426a44a.png)

虚拟机名字左侧有个类似暂停的符号意味着当前虚拟机已经被挂起：

![](https://cdn.nlark.com/yuque/0/2025/png/50835397/1736054370048-5f23487d-a171-46fe-b4e8-d95c482df481.png)

## 2.右键想要创建快照的虚拟机，点击`快照`>`拍摄快照`
![](https://cdn.nlark.com/yuque/0/2025/png/50835397/1736054448584-441fd53c-c66b-414d-a354-b2a02cb20663.png)

## 3.填写名称和描述，然后点击`拍摄快照`
![](https://cdn.nlark.com/yuque/0/2025/png/50835397/1736059598769-4af20127-0607-4243-a485-775abfa8876d.png)

点击完`拍摄快照`后，等待创建完成

## 4.查看创建的快照
![](https://cdn.nlark.com/yuque/0/2025/png/50835397/1736059717293-756d8856-938e-44fd-8c52-d1fe505692a2.png)

点击自己创建的快照查看：

![](https://cdn.nlark.com/yuque/0/2025/png/50835397/1736059773135-3c1c53be-ff96-4b73-8a81-4df755c08ae4.png)

![](https://cdn.nlark.com/yuque/0/2025/png/50835397/1736059781801-fb9770c7-c636-4ef9-ae1f-ad7c4b113ca9.png)

说明快照创建成功啦🌈🎉👏

# 三、VMware 从快照中恢复虚拟机
创建快照后，当虚拟机发生故障需要恢复时，我们就可以用之前创建好的快照恢复虚拟机的状态。

我们用创建某个文件📝来模拟修改配置文件失败后需要用快照恢复虚拟机的场景，给大家看下如何从快照中恢复虚拟机

## 1.随便创建个文件模拟修改配置文件
继续运行虚拟机，

![](https://cdn.nlark.com/yuque/0/2025/png/50835397/1736060193358-609d73e8-2d13-4c38-9efe-21cde4a1333e.png)

随便创建个文件，然后随便写的内容，模拟对配置文件的修改：

![](https://cdn.nlark.com/yuque/0/2025/png/50835397/1736060278304-c377bbec-c8f1-485b-98ff-ff6d1edf66ef.png)

![](https://cdn.nlark.com/yuque/0/2025/png/50835397/1736060299385-5ce9928c-0799-4298-8c13-88af97749ab4.png)

现在我们发现这个“配置文件”有问题，引起了服务不可用，又记不清楚自己修改了哪些地方，只能通过快照来把虚拟机恢复到以前的状态了

## 2.从快照恢复虚拟机
第 1 步还是挂起虚拟机：

![](https://cdn.nlark.com/yuque/0/2025/png/50835397/1736054009320-058897ff-2011-4ccc-a85e-d839a426a44a.png?x-oss-process=image%2Fformat%2Cwebp)

第 2 步，右键想要恢复快照的虚拟机，选择`快照`>`恢复到快照`来恢复到某个快照

![](https://cdn.nlark.com/yuque/0/2025/png/50835397/1736060704153-55155ddd-f2f2-4c99-8c50-8dfd5620026a.png)

点击`是`

![](https://cdn.nlark.com/yuque/0/2025/png/50835397/1736060769123-01956004-07e8-4aeb-ab5c-c6f711a3058f.png)

> ❗❗❗注意：恢复快照后，虚拟机的当前状态会丢失❗❗❗ 

等待完成

## 3.再运行虚拟机，发现创建的文件已经消失了，说明恢复快照成功了🌈🎉👏
![](https://cdn.nlark.com/yuque/0/2025/png/50835397/1736060967075-c14e012d-ba53-4614-977f-70f18043d923.png)

